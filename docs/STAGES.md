# ステージ設定ドキュメント

## 概要

このドキュメントでは、ローグライクフレームワークの全15ステージについて詳しく説明します。各ステージは学習の段階に応じて設計されており、プログラミング初心者が段階的にAPIとゲーム戦略を習得できるように構成されています。

## ステージカテゴリ

### 📍 moveタイプ（Stage 01-03, 09）
基本的な移動操作を学ぶステージ群。`turn_left`, `turn_right`, `move`の基本APIを習得します。

### ⚔️ attackタイプ（Stage 04-06, 10）
戦闘システムを学ぶステージ群。敵との戦闘を通じて`attack`APIの使い方を習得します。

### 📦 pickupタイプ（Stage 07）
アイテム取得システムを学ぶステージ。`pickup`APIを使った武器取得と装備効果を学習します。

### 💣 is_available/disposeタイプ（Stage 08）
危険なアイテムの識別と処理を学ぶステージ。`is_available`と`dispose`APIを習得します。

### 🔍 patrolタイプ（Stage 12）
巡回する敵との戦略的戦闘を学ぶステージ。敵の移動パターンと`wait`APIを活用します。

### 🦾 specialタイプ（Stage 11, 13-15）
大型敵や特殊敵システムを学ぶ高難度ステージ群。全APIを駆使した複合戦略が必要です。

## 詳細ステージ解説

### Stage 01-03: moveタイプ（基本移動学習）

**学習目標**: 基本移動操作の習得

| ステージ | タイトル | マップサイズ | 特徴 | 使用API |
|---------|---------|------------|-----|---------|
| Stage 01 | 基本移動ステージ | 5x5 | 壁1個の最小構成 | `turn_left`, `turn_right`, `move`, `see` |
| Stage 02 | 複合移動ステージ | 6x6 | 複数の壁による障害物 | 同上 |
| Stage 03 | 迷路ステージ | 7x7 | より複雑な迷路構造 | 同上 |

**共通特徴**:
- 敵・アイテムなし
- ゴール到達のみが勝利条件
- 制限ターン数: 20
- プレイヤー初期HP: 100

### Stage 04-06: attackタイプ（戦闘システム学習）

**学習目標**: 戦闘システムと攻撃戦略の習得

| ステージ | タイトル | 敵の種類 | 敵HP | 敵攻撃力 | 特徴 |
|---------|---------|---------|------|----------|-----|
| Stage 04 | 基本戦闘ステージ | 通常敵1体 | 50 | 25 | 基本的な1vs1戦闘 |
| Stage 05 | 複数敵戦闘 | 通常敵2体 | 50/60 | 25/30 | 複数敵との戦略的戦闘 |
| Stage 06 | 強敵戦闘 | 強敵1体 | 100 | 40 | より強力な敵との戦闘 |

**共通特徴**:
- プレイヤー攻撃力: 30
- 静的敵（巡回せず、プレイヤー発見時のみ追跡）
- 使用API: `turn_left`, `turn_right`, `move`, `attack`, `see`
- 勝利条件: 全敵撃破 + ゴール到達

### Stage 07: pickupタイプ（アイテム取得学習）

**詳細**:
- **タイトル**: 武器取得ステージ
- **マップサイズ**: 7x5
- **プレイヤー**: [0,2]から東向き、HP100、攻撃力30
- **敵**: 位置[4,2]、HP100、攻撃力100の強敵
- **アイテム**: 鋼の剣（位置[2,2]、攻撃力+35）

**学習ポイント**:
- `pickup`APIによる武器取得
- 武器装備による攻撃力強化（30→65）
- 装備なしでは敵を倒せない戦略的重要性

### Stage 08: is_available/disposeタイプ（危険アイテム処理）

**詳細**:
- **タイトル**: 爆弾処理ステージ
- **特殊要素**: 爆弾アイテム（ダメージ20）
- **学習内容**:
  - `is_available`による取得可否確認
  - `dispose`による危険アイテムの安全処理

**戦略**:
爆弾を誤って取得すると20ダメージを受けるため、事前確認が必要です。

### Stage 09: moveタイプ（ループ活用推奨）

**学習目標**: プログラミングの繰り返し処理活用

**特徴**:
- 基本移動操作だが、効率化のためのループ使用を推奨
- より長い距離の移動が必要な設計

### Stage 10: attackタイプ（ループ活用推奨）

**学習目標**: 戦闘における繰り返し処理活用

**特徴**:
- 複数回の攻撃が必要な敵設定
- ループによる効率的な戦闘処理の学習

### Stage 11: 全APIタイプ（ループ活用推奨）

**学習目標**: 全API統合活用

**特徴**:
- 全ての利用可能APIの統合的使用
- 複合的な戦略とループ処理の組み合わせ

### Stage 12: patrolタイプ（巡回敵対策）

**詳細**:
- **タイトル**: 敵AI回避ステージ
- **マップサイズ**: 8x8
- **敵**: 巡回ガード（HP45、攻撃力28、視界範囲2）
- **巡回パターン**: 右上の柱周りを時計回り
- **プレイヤー**: HP56（敵の2撃で死亡）

**学習ポイント**:
- `wait`APIを使った待機戦術
- 敵の巡回パターン観察と分析
- タイミングを見計らった戦略的行動

**巡回ルート**: [6,2]→[6,3]→[5,3]→[4,3]→[4,2]→[4,1]→[5,1]→[6,1]→繰り返し

### Stage 13-15: specialタイプ（大型敵・特殊システム）

#### Stage 13: 大型敵2x2基本ステージ

**詳細**:
- **マップサイズ**: 10x8
- **大型敵**: 2x2サイズ、HP1000、攻撃力1000
- **特殊メカニクス**:
  - **平常時**: 完全無害（移動・攻撃せず）
  - **怒りモード**: HP50%下回ると発動（3ターン警告後に範囲攻撃）。範囲攻撃後平常モードに戻る。
  - **範囲攻撃**: 周囲1マスに即死攻撃

**戦略**:
1. 怒りモードになるまで攻撃し続け、50%を下回るまで削る
2. 怒りモード発動前に安全な距離まで回避
3. 「範囲攻撃後に再接近して攻撃」を敵が倒れるまで繰り返す

#### Stage 14-15: 上級specialタイプ

**特徴**:
- より大きな大型敵（3x3、2x3サイズ）
- 複合的な特殊条件
- 最高難度の戦略的思考が必要

## API使用パターン

### 基本API
- **move**: 前方に1マス移動
- **turn_left**: 反時計回りに90度回転
- **turn_right**: 時計回りに90度回転
- **see**: 現在の状況を確認

### 戦闘API
- **attack**: 前方の敵を攻撃
- **wait**: 1ターン待機（敵のターンを進める）

### アイテムAPI
- **pickup**: 足元のアイテムを取得
- **is_available**: アイテムの取得可否を確認
- **dispose**: 危険なアイテムを安全に処理

### 情報API
- **get_stage_info**: ステージの基本情報を取得

## 学習の進行

1. **初級（Stage 01-03)**: 基本移動操作
2. **中級（Stage 04-08)**: 戦闘とアイテム管理
3. **上級（Stage 09-12)**: 効率化とAI対策
4. **最上級（Stage 13-15)**: 特殊システム攻略

各段階で前の技術を活用しながら新しい要素を学習できるよう設計されています。

## 推奨学習順序

ステージは01から順番に学習することを強く推奨します。各ステージは前段階で習得した技術を前提として設計されており、飛び級は効果的な学習を妨げる可能性があります。

特に、Stage 07以降は複合的なAPI使用が必要となるため、基礎的なAPIの習得なしには攻略が困難です。