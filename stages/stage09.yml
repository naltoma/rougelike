id: stage09
title: ループ+攻撃練習ステージ
description: ループ処理と攻撃を組み合わせて学ぶステージです。プレイヤーは北向きで開始し、右上と右下の敵を倒してから左下のゴールを目指します。turn_right()、move()、attack()の組み合わせを繰り返すパターンでクリアできます。

board:
  size: [10, 10]
  grid:
    - ".........."
    - "#########."
    - "#.......#."
    - "#.......#."
    - "#.......#."
    - "#.......#."
    - "#.......#."
    - "#.......#."
    - "#.......#."
    - ".........."
  legend:
    "#": "wall"
    ".": "empty"
    "P": "player"
    "G": "goal"
    "E": "enemy"

player:
  start: [0, 0]
  direction: "N"
  hp: 100
  max_hp: 100
  attack_power: 10

goal:
  position: [0, 9]

enemies:
  - id: "enemy1"
    position: [9, 0]    # 右上
    type: "normal"
    direction: "S"       # 南向き（プレイヤーが来ない方向）
    hp: 100
    max_hp: 100
    attack_power: 5
    vision_range: 2
    behavior: "static"
  - id: "enemy2"
    position: [9, 9]    # 右下
    type: "normal"
    direction: "W"       # 西向き（プレイヤーが来ない方向）
    hp: 100
    max_hp: 100
    attack_power: 5
    vision_range: 2
    behavior: "static"

items: []

constraints:
  max_turns: 100
  allowed_apis: ["turn_left", "turn_right", "move", "attack", "wait", "see"]

victory_conditions:
  - type: "defeat_all_enemies_and_reach_goal"

# 学習目標とヒント
learning_objectives:
  - "for文を使った繰り返し処理を学ぶ"
  - "while文による条件付きループを理解する"
  - "攻撃処理とループの組み合わせを習得"
  - "敵を倒すための攻撃回数計算を学ぶ"
  - "移動、攻撃、ループの統合パターンを体験"

hints:
  - "プレイヤーは[0,0]から北向き(N)で開始し、左下[0,9]がゴールです"
  - "右上[9,0]と右下[9,9]に敵がいます。すべての敵を倒してからゴールに向かってください"
  - "敵のHP: 100、プレイヤーのATK: 10のため、各敵を倒すには10回攻撃が必要です"
  - "敵は最初プレイヤーの方を向いていないため、背後から攻撃できます"
  - "💡 推奨クリア手順:"
  - "  1. turn_right() + move()×9 (東に移動 [0,0]→[9,0])"
  - "  2. for i in range(10): attack() (右上の敵を攻撃×10回)"
  - "  3. turn_right() + move()×9 (南に移動 [9,0]→[9,9])"
  - "  4. turn_left() + for i in range(10): attack() (右下の敵を攻撃×10回)"
  - "  5. turn_right() + move()×9 (西に移動 [9,9]→[0,9] ゴール到達)"
  - "攻撃ループの例: for i in range(10): attack()"
  - "移動ループの例: for i in range(9): move()"
  - "see()で現在位置と敵の状態を確認できます"