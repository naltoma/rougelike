id: stage10
title: 敵AI回避ステージ
description: 巡回する敵を避けながら武器を取得し、戦略的に攻撃するステージです。敵の移動パターンを観察し、視界を避けて行動しましょう。

board:
  size: [8, 8]
  grid:
    - "........"
    - "........"
    - "..#..#.."
    - "........"
    - "........"
    - "..#..#.."
    - "........"
    - "........"
  legend:
    "#": "wall"
    ".": "empty"
    "P": "player"
    "G": "goal"
    "E": "enemy"
    "W": "weapon"

player:
  start: [0, 0]
  direction: "E"
  hp: 56          # 敵の攻撃力28×2=56で確実に2撃死
  max_hp: 56
  attack_power: 30

goal:
  position: [7, 7]

enemies:
  - id: "patrol_guard"
    type: "orc"
    position: [6, 2]
    direction: "E"
    hp: 45
    attack_power: 28
    behavior: "patrol"
    vision_range: 2
    patrol_path:
      - [6, 2]  # 右上柱の東側（開始位置）
      - [6, 3]  # 東から南への中間点
      - [5, 3]  # 右上柱の南側
      - [4, 3]  # 南から西への中間点
      - [4, 2]  # 右上柱の西側
      - [4, 1]  # 西から北への中間点
      - [5, 1]  # 右上柱の北側
      - [6, 1]  # 北から東への中間点

items:
  - id: "blade1"
    type: "weapon"
    name: "戦士の刃"
    position: [6, 3]
    effect:
      attack: 25
    auto_equip: true

constraints:
  max_turns: 80
  allowed_apis: ["turn_left", "turn_right", "move", "attack", "pickup", "wait", "see"]

victory_conditions:
  - type: "defeat_all_enemies"
  - type: "reach_goal"

# 学習目標とヒント
learning_objectives:
  - "敵の巡回パターンを観察・分析する能力を養う"
  - "wait()を活用したタイミング制御を学ぶ"
  - "視界範囲を理解して回避行動を計画する"
  - "戦略的アイテム取得と敵との距離管理"
  - "see()による状況把握とリアルタイム判断"

hints:
  - "プレイヤーは北西角[0,0]から開始、ゴールは南東角[7,7]です"
  - "敵は1マス柱の周囲を時計回りに巡回します（視界範囲2マス）"
  - "巡回ルート: [3,2]→[2,3]→[1,2]→[2,1]→[3,2]の繰り返し（東向きスタート）"
  - "武器「戦士の刃」は右側[6,3]にあります（攻撃力+25）"
  - "see()で敵の位置と向きを確認して安全なタイミングを見極めましょう"
  - "敵が遠い位置にいる時に move()で武器に接近しましょう"
  - "pickup()で武器取得後、敵の巡回タイミングを待ちましょう"
  - "wait()を使って敵が有利な位置に来るまで待機できます"
  - "武器取得後の攻撃力は55（30+25）で敵HP45を1撃で倒せます"
  - "敵の攻撃力28は危険なので、正面対決は避けましょう"
  - "巡回中の敵の背後から近づいて攻撃するのが効果的です"
  - "戦略例: 安全確認→武器取得→敵待ち→背後接近→攻撃→ゴール"