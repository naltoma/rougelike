# Technology Stack

## Architecture
- **ãƒ‘ã‚¿ãƒ¼ãƒ³**: æ•™è‚²ç”¨ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ + ã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³
- **è¨­è¨ˆæ€æƒ³**: ã‚·ãƒ³ãƒ—ãƒ«ãªAPIè¨­è¨ˆã€æ®µéšçš„æ©Ÿèƒ½è¿½åŠ ã€å¯èª­æ€§é‡è¦–
- **é…å¸ƒæ–¹å¼**: condaç’°å¢ƒé…å¸ƒã€æ‰‹å‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã«ã‚ˆã‚‹å­¦ç¿’åŠ¹æœ

## Frontend
- **GUI v1.1**: pygameï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¡¨ç¤ºãƒ»å®Ÿè¡Œåˆ¶å¾¡å¯¾å¿œï¼‰
  - 2Dæç”»ã€5x5ã€œ10x10ã‚°ãƒªãƒƒãƒ‰è¡¨ç¤º
  - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ»æ•µãƒ»ã‚¢ã‚¤ãƒ†ãƒ ãƒ»å£ã®è¦–è¦šåŒ–
  - å¤§å‹æ•µï¼ˆ2x2, 3x3ï¼‰ãƒ»ç‰¹æ®Šæ•µï¼ˆ2x3ï¼‰å¯¾å¿œ
  - **ğŸ†• å®Ÿè¡Œåˆ¶å¾¡ãƒ‘ãƒãƒ«**: Step/Continue/Pause/Stopãƒœã‚¿ãƒ³
  - **ğŸ†• ä¸€æ™‚åœæ­¢æ©Ÿèƒ½**: solve()å®Ÿè¡Œå‰ã®å­¦ç¿’è€…ç¢ºèª
  - **ğŸ†• ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ**: Space/Enter/Escå¯¾å¿œ
- **CUI**: ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹è¡¨ç¤ºï¼ˆå­¦ç¿’ç›®çš„ãƒ»ãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
  - åŒä¸€ãƒ­ã‚¸ãƒƒã‚¯ã€åˆ‡æ›¿å¯èƒ½è¨­è¨ˆ
- **APIè¨­è¨ˆ**: ç›´æ„Ÿçš„é–¢æ•°åã€å‘ãåˆ¶å¾¡é‡è¦–
  ```python
  turn_left(), turn_right()  # å‘ãå¤‰æ›´
  move()                     # æ­£é¢ç§»å‹•
  attack(), pickup()         # ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  see() -> dict             # çŠ¶æ³å–å¾—
  ```

## Backend
- **è¨€èª**: Python 3.x
- **ã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³**: pygameï¼ˆGUIç”¨ï¼‰
- **ãƒ‡ãƒ¼ã‚¿å‡¦ç†**: æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä¸­å¿ƒ
  - json, csvï¼ˆãƒ­ã‚°å‡ºåŠ›ï¼‰
  - yamlï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸å®šç¾©èª­è¾¼ï¼‰
  - hashlibï¼ˆã‚³ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥ï¼‰
- **APIé€£æº**: Google Sheets APIï¼ˆãƒ­ã‚°é€ä¿¡ï¼‰

## ğŸ†• v1.1 Backend Components
- **å®Ÿè¡Œåˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ **: ExecutionController
  - æ®µéšçš„å®Ÿè¡Œç®¡ç†ï¼ˆStep/Continue/Pause/Stopï¼‰
  - solve()å®Ÿè¡Œå‰ä¸€æ™‚åœæ­¢
  - ExecutionModeçŠ¶æ…‹ç®¡ç†ï¼ˆPAUSED/RUNNING/STOPPEDï¼‰
- **ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ç®¡ç†**: HyperParameterManager
  - å­¦ç”ŸIDè‡ªå‹•æ¤œè¨¼ï¼ˆ6æ¡æ•°å­—+è‹±å¤§æ–‡å­—1æ¡ï¼‰
  - ã‚¹ãƒ†ãƒ¼ã‚¸IDæ¤œè¨¼ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  - ãƒ­ã‚°è¨­å®šç®¡ç†ã¨æ¤œè¨¼
- **æ‹¡å¼µã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ­ã‚°**: SessionLogManager
  - ç°¡æ˜“ç‰ˆãƒ­ã‚°æ©Ÿèƒ½ã®æ”¹å–„å®Ÿè£…
  - ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹ãƒ»å®Œäº†ãƒ­ã‚°è¨˜éŒ²
  - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–
- **ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å±¥æ­´**: ActionHistoryTracker
  - è©³ç´°ãªè¡Œå‹•è¨˜éŒ²ã¨ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
  - å­¦ç¿’åˆ†æç”¨ãƒ‡ãƒ¼ã‚¿åé›†

## Development Environment
- **Python**: 3.8+ å¿…é ˆ
- **ä»®æƒ³ç’°å¢ƒ**: condaæ¨å¥¨
- **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†**: pipï¼ˆæ•™è‚²ç›®çš„ã§æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ï¼‰
- **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**: 
  - `requirements.txt` : pipç’°å¢ƒå®šç¾©ï¼ˆpytestçµ±åˆï¼‰
  - `conftest.py` : pytestè¨­å®š
  - `config.py` : ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š

## Testing Infrastructure (v1.0.1)
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: pytest 7.4.0+
- **ãƒ—ãƒ©ã‚°ã‚¤ãƒ³**: 
  - pytest-html (HTML ãƒ¬ãƒãƒ¼ãƒˆ)
  - pytest-json-report (JSONå‡ºåŠ›)
  - pytest-cov (ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®š)
  - pytest-xdist (ä¸¦åˆ—å®Ÿè¡Œ)
  - pytest-mock (ãƒ¢ãƒƒã‚¯æ©Ÿèƒ½)
  - pytest-clarity (æ”¹å–„ã•ã‚ŒãŸå‡ºåŠ›)
  - pytest-sugar (ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹è¡¨ç¤º)
  - pytest-benchmark (ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯)

## Common Commands
```bash
# ç’°å¢ƒæ§‹ç¯‰ï¼ˆæ•™è‚²ç›®çš„ã§æ®µéšçš„ã«ï¼‰
conda create -n rougelike python=3.8+
conda activate rougelike
pip install -r requirements.txt

# å®Ÿè¡Œ
python main.py          # GUI v1.1 modeï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ»å®Ÿè¡Œåˆ¶å¾¡å¯¾å¿œï¼‰
python main.py --cui    # CUI mode
python main.py --gui    # æ˜ç¤ºçš„GUIæŒ‡å®š
python student_example.py  # å­¦ç”Ÿã‚µãƒ³ãƒ—ãƒ«å®Ÿè¡Œ

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆæ¨å¥¨: pytestçµ±åˆï¼‰
python run_tests.py     # é«˜æ©Ÿèƒ½å®Ÿè¡Œï¼ˆå¤±æ•—åˆ†æä»˜ãï¼‰
pytest -v               # åŸºæœ¬pytestå®Ÿè¡Œ
pytest --lf -v          # å¤±æ•—ãƒ†ã‚¹ãƒˆã®ã¿å†å®Ÿè¡Œ
pytest -m "not gui" -v  # GUIãƒ†ã‚¹ãƒˆä»¥å¤–
pytest -k "progression" -v  # ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ

# Makefileå®Ÿè¡Œ
make test               # å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
make test-failed        # å¤±æ•—ãƒ†ã‚¹ãƒˆã®ã¿
make test-no-gui        # GUIãƒ†ã‚¹ãƒˆä»¥å¤–
make test-coverage      # ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ã
make test-parallel      # ä¸¦åˆ—å®Ÿè¡Œ
```

## Environment Variables
- `STUDENT_ID`: 6æ¡æ•°å­—+è‹±å¤§æ–‡å­—1æ¡
- `PERFORMED_DATE`: YYYY-MM-DDå½¢å¼ï¼ˆé…å»¶åˆ¤å®šç”¨ï¼‰
- `COLLABORATORS`: ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šå­¦ç±ç•ªå·
- `GOOGLE_SHEETS_URL`: é€ä¿¡å…ˆã‚·ãƒ¼ãƒˆURLï¼ˆæ•™å“¡è¨­å®šï¼‰

## Port Configuration
- **é–‹ç™ºæ™‚**: ãªã—ï¼ˆã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³å®Ÿè¡Œï¼‰
- **å°†æ¥æ‹¡å¼µ**: 
  - ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼: 8080ï¼ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç”¨ï¼‰
  - WebSocket: 8081ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€²æ—å…±æœ‰ï¼‰

## Data Formats
- **ã‚¹ãƒ†ãƒ¼ã‚¸å®šç¾©**: YAML
  ```yaml
  id: stage01
  board:
    size: {w: 5, h: 5}
    repr:
      grid: |
        P....
        .....
        ..G..
  api: {allowed: [turn_left, turn_right, move]}
  ```
- **ãƒ­ã‚°å‡ºåŠ›**: JSONL
  ```json
  {"timestamp": "2024-08-30T14:39:00", "student_id": "123456A", "stage_id": "stage01", "turns": 5, "attempts": 3, "result": "pass"}
  ```

## Security Considerations
- **èªè¨¼**: å­¦ç±ç•ªå·ãƒ™ãƒ¼ã‚¹ã€åŒ¿ååŒ–ãªã—
- **ãƒ‡ãƒ¼ã‚¿ä¿è­·**: ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œã€æœ€å°é™ã®å¤–éƒ¨é€šä¿¡
- **ä¸æ­£å¯¾ç­–**: å°†æ¥å®Ÿè£…ï¼ˆã‚³ãƒ¼ãƒ‰é¡ä¼¼åº¦æ¤œå‡ºã€åˆ¶é™æ™‚é–“ç­‰ï¼‰
- **ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼**: å­¦å†…ãƒ‰ãƒ¡ã‚¤ãƒ³é™å®šå…¬é–‹

## Performance Requirements
- **ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: ã‚¿ãƒ¼ãƒ³å®Ÿè¡Œ < 100ms
- **ãƒ¡ãƒ¢ãƒª**: < 100MBï¼ˆpygameå«ã‚€ï¼‰
- **ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º**: ã‚³ãƒ¼ãƒ‰ä¸Šé™300è¡Œ/32KB
- **ãƒ¬ãƒ¼ãƒˆåˆ¶é™**: Google Sheets 6ä»¶/åˆ†